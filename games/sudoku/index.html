<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-en="Sudoku" data-zh-HK="數獨">Sudoku</title>
    <link rel="stylesheet" href="../../assets/style.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="sudoku-body">
    <header id="siteHeader" class="site-header"></header>

    <main class="sudoku-shell">
      <div class="shell-heading">
        <h1 data-en="Sudoku" data-zh-HK="數獨">Sudoku</h1>
        <p
          class="subtitle"
          data-en="Four tiers, smart notes, solver-ready."
          data-zh-HK="四種難度、筆記輔助、內建求解器。"
        >
          Four tiers, smart notes, solver-ready.
        </p>
        <a
          class="intro-link"
          href="intro.html"
          data-en="Need a quick overview?"
          data-zh-HK="需要快速介紹？"
        >
          Need a quick overview?
        </a>
      </div>

      <section class="game-surface">
        <div class="board-panel">
          <div class="status-bar">
            <div class="status-item">
              <span data-en="Difficulty" data-zh-HK="難度">Difficulty</span>
              <select id="difficultySelect" aria-label="Select difficulty">
                <option value="easy" data-en="Easy" data-zh-HK="輕鬆">
                  Easy
                </option>
                <option value="normal" data-en="Normal" data-zh-HK="標準">
                  Normal
                </option>
                <option value="hard" data-en="Hard" data-zh-HK="困難">
                  Hard
                </option>
                <option value="master" data-en="Master" data-zh-HK="大師">
                  Master
                </option>
              </select>
            </div>
            <div class="status-item">
              <span data-en="Timer" data-zh-HK="計時">Timer</span>
              <span id="timerDisplay">00:00</span>
            </div>
            <div class="status-item">
              <span data-en="Mistakes" data-zh-HK="錯誤">Mistakes</span>
              <span id="mistakeDisplay">0 / 3</span>
            </div>
          </div>

          <div
            id="sudokuBoard"
            class="sudoku-board"
            role="grid"
            aria-label="Sudoku board"
            aria-live="polite"
          ></div>

          <div class="number-pad" aria-label="Number pad">
            <button class="pad-btn" data-value="1">1</button>
            <button class="pad-btn" data-value="2">2</button>
            <button class="pad-btn" data-value="3">3</button>
            <button class="pad-btn" data-value="4">4</button>
            <button class="pad-btn" data-value="5">5</button>
            <button class="pad-btn" data-value="6">6</button>
            <button class="pad-btn" data-value="7">7</button>
            <button class="pad-btn" data-value="8">8</button>
            <button class="pad-btn" data-value="9">9</button>
            <button
              class="pad-btn utility"
              data-action="erase"
              data-en="Erase"
              data-zh-HK="清除"
            >
              Erase
            </button>
            <button
              id="notesToggle"
              class="pad-btn utility"
              data-action="notes"
              aria-pressed="false"
              data-en="Notes"
              data-zh-HK="筆記"
            >
              Notes
            </button>
          </div>
        </div>

        <aside class="control-panel">
          <div class="control-card">
            <h2 data-en="Actions" data-zh-HK="操作">Actions</h2>
            <div class="control-buttons">
              <button
                data-action="new"
                data-en="New Puzzle"
                data-zh-HK="新局"
              >
                New Puzzle
              </button>
              <button data-action="hint" data-en="Hint" data-zh-HK="提示">
                Hint
              </button>
              <button
                data-action="auto"
                data-en="Auto Solve"
                data-zh-HK="自動解"
              >
                Auto Solve
              </button>
              <button data-action="undo" data-en="Undo" data-zh-HK="復原">
                Undo
              </button>
              <button data-action="redo" data-en="Redo" data-zh-HK="重做">
                Redo
              </button>
            </div>
          </div>

          <div class="control-card">
            <h2 data-en="Notes" data-zh-HK="筆記">Notes</h2>
            <p
              data-en="Select a cell, toggle Notes, then tap numbers to add candidates."
              data-zh-HK="選取格子、切換筆記模式，再點擊數字即可加入候選值。"
            >
              Select a cell, toggle Notes, then tap numbers to add candidates.
            </p>
          </div>

          <div class="control-card">
            <h2 data-en="Shortcuts" data-zh-HK="快捷鍵">Shortcuts</h2>
            <ul>
              <li>Arrow Keys · Move</li>
              <li>1-9 · Fill value</li>
              <li>0 / Backspace · Clear</li>
              <li>Shift · Toggle notes</li>
            </ul>
          </div>
        </aside>
      </section>

      <section class="saved-progress">
        <h2 data-en="Saved Progress" data-zh-HK="保存進度">Saved Progress</h2>
        <p
          data-en="Your current grid auto-saves locally. Refresh without fear."
          data-zh-HK="目前棋盤會自動保存，隨時可重新載入。"
        >
          Your current grid auto-saves locally. Refresh without fear.
        </p>
        <button
          id="resetProgress"
          data-en="Clear Saved Game"
          data-zh-HK="清除保存進度"
        >
          Clear Saved Game
        </button>
      </section>
    </main>

    <dialog id="victoryModal" class="modal">
      <div class="modal-card">
        <h2 data-en="Puzzle Complete!" data-zh-HK="完成數獨！">
          Puzzle Complete!
        </h2>
        <p id="victoryStats"></p>
        <div class="modal-actions">
          <button
            data-action="replay"
            data-en="Play Again"
            data-zh-HK="再玩一局"
          >
            Play Again
          </button>
          <button data-action="close" data-en="Close" data-zh-HK="關閉">
            Close
          </button>
        </div>
      </div>
    </dialog>

    <script type="module" src="game.js"></script>
    <script type="module">
      import { initThemeToggle } from "../../assets/theme-toggle.js";
      import { initLocaleMenu } from "../../assets/locale-menu.js";
      import { initHeader } from "../../assets/header.js";

      initHeader("../../index.html");
      initThemeToggle();
      initLocaleMenu();
    </script>
  </body>
</html>
